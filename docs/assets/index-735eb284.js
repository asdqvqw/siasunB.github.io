import{aV as h,o as c,c as u,m as d,a as e,b as m,f as g,cn as b,cj as r,l as v,bJ as k,F as w,aY as E,g as C,bc as D}from"./index-df7e4a51.js";const I=e("h2",null,"✅更新网页:",-1),N=e("br",null,null,-1),V={__name:"web",setup(x){const i=h(null),o=()=>{},f=async()=>{const s=i.value.files[0];s&&b({method:"post",url:"/api/upload",data:s,headers:{"Content-Type":s.type,"X-File-Name":s.name}}).then(a=>{r.success("更新成功"),r.success("刷新网页后生效"),console.log("File uploaded successfully:",a.data)}).catch(a=>{r.error("Error uploading file:",a),console.error("Error uploading file:",a)}).finally(()=>{})};return(s,a)=>{const _=v;return c(),u("div",null,[I,N,d(" ❗注意压缩包中携带web_root文件夹: "),e("input",{style:{"margin-left":"30px"},type:"file",ref_key:"fileInput",ref:i,accept:".tar.gz",onChange:o},null,544),m(_,{type:"primary",onClick:f,style:{"margin-top":"30px",width:"80%","margin-left":"8%"}},{default:g(()=>[d("更新")]),_:1})])}}},T={class:"page-container main-view"},B={class:"table-box content-container page-content-box"},A=e("br",null,null,-1),U=e("h2",null,"✅上传文件到AGV:",-1),$=e("br",null,null,-1),G=e("p",null,[e("h4",null,"将文件拖放到此处上传或点击选择文件"),e("br"),d(" ❗注意无法上传文件夹和文件名带中文的文件。"),e("br")],-1),M={key:0},X=e("br",null,null,-1),j=e("br",null,null,-1),z=e("br",null,null,-1),J=e("br",null,null,-1),S={__name:"index",setup(x){const i=h(null),o=h([]),f=n=>{n.preventDefault();const t=n.dataTransfer.items;if(t){for(const l of t)if(l.kind==="file")if(l.webkitGetAsEntry().isDirectory)console.error("Error: 无法上传文件夹。"),r.error("无法上传文件夹。");else{const p=l.getAsFile();if(/[\u4e00-\u9fa5]/.test(p.name)){console.error("Error: 无法上传包含中文字符的文件。"),r.error("无法上传包含中文字符的文件。");continue}o.value.push(p)}}},s=()=>{i.value.click()},a=n=>{const t=n.target.files;if(t.length>0)for(const l of t){if(/[\u4e00-\u9fa5]/.test(l.name)){console.error("Error: 无法上传包含中文字符的文件。"),r.error("无法上传包含中文字符的文件。");continue}o.value.push(l)}},_=async()=>{for(const n of o.value)await F(n);o.value=[]},F=async n=>{if(n)try{const t=await b({method:"post",url:"/api/upload",data:n,headers:{"Content-Type":n.type,"X-File-Name":n.name}});r.success("上传成功"),console.log("File uploaded successfully:",t.data)}catch(t){r.error("Error uploading file:",t),console.error("Error uploading file:",t)}};return(n,t)=>{const l=v;return c(),u("div",T,[e("div",B,[A,U,$,e("div",{onDragover:t[0]||(t[0]=k(()=>{},["prevent"])),onDrop:f,onClick:s,style:{border:"4px dashed #ccc",padding:"20px","text-align":"center",cursor:"pointer",width:"70%","margin-left":"10%"}},[e("input",{type:"file",ref_key:"fileInput",ref:i,style:{display:"none"},onChange:a,multiple:""},null,544),G,o.value.length>0?(c(),u("ul",M,[(c(!0),u(w,null,E(o.value,(y,p)=>(c(),u("li",{key:p},D(y.name),1))),128))])):C("",!0)],32),X,m(l,{type:"primary",onClick:_,style:{"margin-top":"10px",width:"80%","margin-left":"8%"}},{default:g(()=>[d("上传文件")]),_:1}),j,z,J,e("div",null,[m(V)])])])}}};export{S as default};

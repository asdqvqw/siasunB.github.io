import{_ as V,aV as h,aK as k,o as H,c as I,a as g,b as O,f as T,l as z,m as N,p as Q,q as X}from"./index-df7e4a51.js";import{D as d,W as Y,S as Z,P as j,M as S,L as K,V as i,B as U,a as J,G as $,A as v,E as ee,Q as te}from"./three.module-2fa5ea98.js";import{G as oe,O as ae}from"./GLTFLoader-8d8d2fbb.js";import{D as ne}from"./DRACOLoader-40a28629.js";const se=f=>(Q("data-v-5c3d3681"),f=f(),X(),f),re={class:"home"},ie={class:"choose"},le=se(()=>g("div",{class:"choose-title"},"控制：",-1)),c=500,de={__name:"index",setup(f){const s=h([{x:1,y:2,realthita:.1,angel:.1,speed:2,top:1},{x:3,y:5,realthita:1.5,angel:-2.1,speed:-2,top:5},{x:2,y:6,realthita:3.5,angel:1.1,speed:2,top:2},{x:2,y:1,realthita:1.68,angel:0,speed:0,top:0}]),a=h(0),x=new oe,y=new ne;y.setDecoderPath("https://asdqvqw.github.io/whwtest.github.io/draco/"),x.setDRACOLoader(y);const C=new d(16777215,1);C.position.set(0,0,10);const L=new d(16777215,1);L.position.set(0,0,-10);const D=new d(16777215,1);D.position.set(10,0,0);const E=new d(16777215,1);E.position.set(-10,0,0);const F=new d(16777215,1);F.position.set(0,10,0);let _=0;const p=new Y({antialias:!0});p.setSize(window.innerWidth,window.innerHeight);const u=()=>{_++,_>=W&&(P(),_=0),p.render(o,l),w&&w.update(),requestAnimationFrame(u)};let w,m,t,b=h(null),W=10;const o=new Z,l=new j(75,window.innerWidth/window.innerHeight,.1,1e3);l.position.set(0,2,6),x.load("./main/test.glb",e=>{t=e.scene,t.position.set(0,0,0),t.scale.set(1,.6,.7),t.rotation.set(0,S.degToRad(90),0),o.add(t),A(),q()},e=>{console.log(e.loaded/e.total*100+"% loaded")},e=>{console.error("Error loading model:",e)});const A=()=>{t.traverse(e=>{e.name==="leftwheel"&&(e.rotation.z+=s.value[a.value].speed*.05),e.name==="rightwheel"&&(e.rotation.z+=s.value[a.value].speed*.05)}),requestAnimationFrame(A)},G=()=>{const e=t.getObjectByName("Material_2电器-接近开关M8");if(e){console.log("11111",e.position.y);const r=new i(0,100,-300),n=e.localToWorld(r);l.position.copy(n),l.lookAt(t.position)}requestAnimationFrame(u)},M=()=>{t.traverse(e=>{e.name==="upDown"&&(e.position.y=s.value[a.value].top*50+1e3)})},q=()=>{const e=new K({color:16711680,linewidth:1}),r=s.value.map(B=>new i(B.x,0,-B.y)),n=new U().setFromPoints(r);let R=new J(n,e);a.value=0,o.add(R),u()},P=()=>{if(t&&s.value[a.value]&&s.value[a.value+1]){a.value++;const e=s.value[a.value];t.position.set(e.x,0,-e.y);const r=new ee(0,S.degToRad(s.value[a.value].realthita),0,"XYZ");M();const n=new te().setFromEuler(r);t.setRotationFromQuaternion(n)}};return k(()=>{b.value.appendChild(p.domElement),m=new $(c,c),m.material.opacity=.3,m.material.transparent=!0,o.add(m);const e=new v(new i(1,0,0),new i(0,0,0),c/2,16711680),r=new v(new i(0,0,0),new i(0,0,0),c/2,65280),n=new v(new i(0,0,-1),new i(0,0,0),c/2,255);o.add(e,r,n),w=new ae(l,p.domElement),w.update(),o.add(C),o.add(L),o.add(D),o.add(E),o.add(F),u()}),(e,r)=>{const n=z;return H(),I("div",re,[g("div",{class:"canvas-container",ref_key:"canvasDom",ref:b},null,512),g("div",ie,[le,O(n,{onClick:G},{default:T(()=>[N("aaaaaa")]),_:1})])])}}},we=V(de,[["__scopeId","data-v-5c3d3681"]]);export{we as default};

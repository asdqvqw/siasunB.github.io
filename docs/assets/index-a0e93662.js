import{R as He,D as me,W as je,b as Xe,S as Ye,P as We,G as Ze,M as Ne,L as Qe,V as ea,B as aa,a as ta,E as la,Q as oa,c as ae,d as na}from"./three.module-2fa5ea98.js";import{G as sa,O as ua}from"./GLTFLoader-8d8d2fbb.js";import{a as ra}from"./timer-badddbae.js";import{aV as s,_ as le,Q as z,o as U,c as j,b as e,f as a,l as oe,p as ie,q as ce,a as c,m as g,bc as _e,bl as F,ck as Le,cl as re,cm as ia,F as De,cn as A,cj as Z,r as G,bQ as ca,co as va,g as Ke,aC as Te,e as da,aK as $e}from"./index-df7e4a51.js";import{E as ne}from"./el-dialog-c0f3d22c.js";import{E as se,a as ue}from"./el-table-column-77720c0d.js";import"./el-tag-cac9c3fa.js";import"./el-tooltip-4ed993c7.js";import"./el-popper-d7ccd5c0.js";import"./el-scrollbar-1cd9d3fa.js";import{E as Ae}from"./el-button-group-ae62c6a3.js";/* empty css                */import{E as fa}from"./el-switch-fe0916cf.js";/* empty css                */import{E as pa,a as ma}from"./el-form-item-8c758b19.js";import{E as _a,a as ya}from"./el-select-546e2bfa.js";import{a as ga}from"./index-565d57e3.js";import{a as ka,b as ba}from"./index-9767b0f4.js";import"./index-344724fa.js";import"./_Uint8Array-f4037249.js";import"./_initCloneObject-b58f4364.js";import"./debounce-8185d5a4.js";import"./index-d321402d.js";import"./browser-e414cc93.js";import"./strings-76a06904.js";const t=s({electricalModule:{kinematic:{drive:[{wheel:{fServoSpeed:-.21026467742281965,nServoErrCode:0,nServoState:56417}},{wheel:{fServoSpeed:.20026467742281967,nServoErrCode:0,nServoState:16227}}],nDriveCount:2},safeCheck:{bEmgStop:!1,bHardBumper:!1,nPlsTrig:2},sensor:{battmetr:{fCapPercent:74.4000015258789,sState:2},camera:{fthita:0,fx:0,fy:0},magnetic:{fDev:[0,0],sGrade:0}}},equipmentInfo:{rack:{lifter_axis:{bBottom:!1,bTop:!1,fAxisPosition:0,fAxisSpeed:0},turn_axis:{bLevel:!1,bZero:!1,fAxisPosition:0,fAxisSpeed:0}},strEquipmentTaskMessage:" ",uEquipmentState:3,uEquipmentTaskError:0,uEquipmentTaskID:0,uEquipmentTaskState:65535},event:{advise:"",detail:"",name:""},nAgvState:0,navInfo:{fRealThita:6.255185604095459,fRealX:.0290000438690186,fRealY:.09000000357627869,fThitaDev:0,fXDev:0,fmVersion:"172.32.128.0",swVersion:"2.0.2.0"},tcInfo:{iDevX:0,iDevY:0,sCurSpeed:0,sHeading:0,sProgress:0,uFromNode:65535,uToNode:65535,uWorkState:0,ucEventState:0,ucTaskState:3,usBatterState:1,usCargoState:0,usEventDetail:0,usKey:65535,usTaskID:65535},uAgvType:0});let Ee=s(1);const ke=new He;const ha=x=>(ie("data-v-c0927727"),x=x(),ce(),x),xa=ha(()=>c("span",{style:{"font-size":"18px"}}," 导航",-1)),Sa={__name:"nav",setup(x){const _=s(!1),M=()=>{_.value=!0},f=z(()=>[{key:"导航软件版本",value:t.value.navInfo.fmVersion,key2:"导航环境模型版本",value2:t.value.navInfo.swVersion},{key:"理论位置",value:`(${t.value.tcInfo.iDevX},${t.value.tcInfo.iDevY})`,key2:"当前位置",value2:`(${t.value.navInfo.fRealX.toFixed(3)},${-t.value.navInfo.fRealY.toFixed(3)},${(t.value.navInfo.fRealThita*180/Math.PI).toFixed(3)})`},{key:"角度偏差",value:t.value.navInfo.fXDev.toFixed(4),key2:"左右偏差",value2:t.value.navInfo.fThitaDev.toFixed(4)},{key:"发送舵角",value:"",key2:"发送速度",value2:""}]);return(N,y)=>{const k=oe,r=se,n=ue,o=ne;return U(),j("div",null,[e(k,{class:"controlnav",type:"info",onClick:M},{default:a(()=>[xa]),_:1}),e(o,{modelValue:_.value,"onUpdate:modelValue":y[0]||(y[0]=p=>_.value=p),title:"导航信息",modal:!1,draggable:"","close-on-click-modal":!1,"modal-class":"kkk-dialog-class","custom-class":"ele-dialog"},{default:a(()=>[e(n,{data:f.value,border:"",style:{width:"90%","margin-left":"5%"}},{default:a(()=>[e(r,{prop:"key"}),e(r,{prop:"value"}),e(r,{prop:"key2"}),e(r,{prop:"value2"})]),_:1},8,["data"])]),_:1},8,["modelValue"])])}}},wa=le(Sa,[["__scopeId","data-v-c0927727"]]);const ve=x=>(ie("data-v-af6281e2"),x=x(),ce(),x),Ca=ve(()=>c("span",{style:{"font-size":"18px"}}," 电气",-1)),Ea=ve(()=>c("br",null,null,-1)),Ia=ve(()=>c("br",null,null,-1)),Ma=ve(()=>c("br",null,null,-1)),Na=ve(()=>c("br",null,null,-1)),Ka=ve(()=>c("br",null,null,-1)),Ta={__name:"ele",setup(x){const _=s(!1),M=()=>{_.value=!0},f=z(()=>{let h="";const V=t.value.electricalModule.safeCheck.nPlsTrig;return V===0?h="未触发":V===1?h="近":V===2?h="中":V===3&&(h="远"),[{key:"保险杠状态",value:t.value.electricalModule.safeCheck.bHardBumper?"触发":"未触发",key2:"急停状态",value2:t.value.electricalModule.safeCheck.bEmgStop?"触发":"未触发",key3:"pls状态",value3:h}]}),N=z(()=>[{key:"X",value:t.value.electricalModule.sensor.camera.fx.toFixed(4),key2:"Y",value2:t.value.electricalModule.sensor.camera.fy.toFixed(4),key3:"角度",value3:t.value.electricalModule.sensor.camera.fthita.toFixed(4)}]),y=z(()=>[{key:"磁导航偏差1",value:t.value.electricalModule.sensor.magnetic.fDev[0],key2:"磁导航偏差2",value2:t.value.electricalModule.sensor.magnetic.fDev[1],key3:"磁导航状态",value3:t.value.electricalModule.sensor.magnetic.sGrade}]),k=s(0),r=s(null),n=s(null),o=s(null),p=s(0),E=s("驱动轴0"),b=s(0),I=s(0),u=s(0),K=s(0),v=s(0),i=s(0),$=()=>{p.value<k.value-1?p.value++:p.value=0,console.log(p.value),E.value="驱动轴"+p.value.toString()},q=z(()=>{if(k.value=t.value.electricalModule.kinematic.nDriveCount,t.value.electricalModule.kinematic.drive[p.value].wheel!==void 0){switch(r.value=t.value.electricalModule.kinematic.drive[p.value].wheel.fServoSpeed.toFixed(5),n.value=t.value.electricalModule.kinematic.drive[p.value].wheel.nServoErrCode,n.value){case 0:n.value="无错误";break;case 100:n.value="Motec 系统故障/Kinco 内部错误报警";break;case 101:n.value=" Motec 驱动器启动故障/Kinco 编码器ABZ连接报警";break;case 102:n.value="Motec 参数错误/Kinco 编码器UVW连接报警";break;case 103:n.value=" Motec 欠压报警/Kinco  编码器计数报警";break;case 104:n.value="Motec 过压报警/Kinco 温度报警";break;case 105:n.value=" Motec I2T报警/Kinco 高压报警";break;case 106:n.value=" Motec 超过峰值电流/Kinco 低压报警";break;case 107:n.value=" Motec 位置误差超限/Kinco 过流报警";break;case 108:n.value="Motec 编码器故障/Kinco 吸收电阻报警";break;case 109:n.value="Motec 速度误差超限/Kinco 位置误差过大报警";break;case 110:n.value="Kinco 逻辑低压报警";break;case 111:n.value=" Kinco 电机或驱动器iit报警";break;case 112:n.value=" Kinco 脉冲频率过高报警";break;case 113:n.value="Kinco STO错误";break;case 114:n.value="Kinco 电机励磁报警";break;case 115:n.value="Motec 电机没有使能/Kinco 存储器报警";break}o.value=t.value.electricalModule.kinematic.drive[p.value].wheel.nServoState}return t.value.electricalModule.kinematic.drive[p.value].steer!==void 0?(b.value=t.value.electricalModule.kinematic.drive[p.value].steer.fServoPosition.toFixed(5),I.value=t.value.electricalModule.kinematic.drive[p.value].steer.nServoState,u.value=t.value.electricalModule.kinematic.drive[p.value].steer.nServoErrCode,K.value=t.value.electricalModule.kinematic.drive[p.value].steer.bPositiveLimitSwt,v.value=t.value.electricalModule.kinematic.drive[p.value].steer.bNegativeLimitSwt,i.value=t.value.electricalModule.kinematic.drive[p.value].steer.bZeroSwt):(b.value="🚫无",I.value="🚫无",u.value="🚫无",K.value="🚫无",v.value="🚫无",i.value="🚫无"),[{key:"轮实际速度",value:r.value,key2:"轮伺服状态码",value2:o.value,key3:"轮伺服错误码",value3:n.value},{key:"舵实际位置",value:b.value,key2:"舵伺服状态码",value2:I.value,key3:"舵伺服错误码",value3:u.value},{key:"舵限位开关1",value:K.value,key2:"舵限位开关2",value2:v.value,key3:"舵零位开关",value3:i.value}]});return(h,V)=>{const L=oe,S=se,B=ue,Y=ne;return U(),j("div",null,[e(L,{class:"controlele",type:"info",onClick:M},{default:a(()=>[Ca]),_:1}),e(Y,{modelValue:_.value,"onUpdate:modelValue":V[0]||(V[0]=ee=>_.value=ee),title:"电气",modal:!1,draggable:"","close-on-click-modal":!1,"modal-class":"kkk-dialog-class","custom-class":"ele-dialog"},{default:a(()=>[Ea,e(B,{data:f.value,border:"",style:{width:"90%","margin-left":"5%"}},{default:a(()=>[e(S,{prop:"key",label:"防碰"}),e(S,{prop:"value"}),e(S,{prop:"key2"}),e(S,{prop:"value2"}),e(S,{prop:"key3"}),e(S,{prop:"value3"})]),_:1},8,["data"]),Ia,e(B,{data:N.value,border:"",style:{width:"90%","margin-left":"5%"}},{default:a(()=>[e(S,{prop:"key",label:"二维码"}),e(S,{prop:"value"}),e(S,{prop:"key2"}),e(S,{prop:"value2"}),e(S,{prop:"key3"}),e(S,{prop:"value3"})]),_:1},8,["data"]),Ma,e(B,{data:y.value,border:"",style:{width:"90%","margin-left":"5%"}},{default:a(()=>[e(S,{prop:"key",label:"磁导航"}),e(S,{prop:"value"}),e(S,{prop:"key2"}),e(S,{prop:"value2"}),e(S,{prop:"key3"}),e(S,{prop:"value3"})]),_:1},8,["data"]),Na,e(B,{data:q.value,border:"",style:{width:"90%","margin-left":"5%"}},{default:a(()=>[e(S,{prop:"key",label:"伺服"}),e(S,{prop:"value"}),e(S,{prop:"key2"}),e(S,{prop:"value2",label:"切换驱动单元"}),e(S,{prop:"key3"},{header:a(()=>[e(L,{onClick:$},{default:a(()=>[g(_e(E.value),1)]),_:1})]),_:1}),e(S,{prop:"value3"})]),_:1},8,["data"]),Ka]),_:1},8,["modelValue"])])}}},$a=le(Ta,[["__scopeId","data-v-af6281e2"]]),Va={style:{"margin-left":"18%"}},La=c("h4",null,"五米测试",-1),Da=c("br",null,null,-1),Aa={style:{"margin-left":"58%","margin-top":"-10%"}},Oa=c("h4",null,"手动任务",-1),Pa=c("br",null,null,-1),qa=c("br",null,null,-1),Fa=c("br",null,null,-1),Ja={style:{"margin-left":"18%"}},Ra=c("h4",null,"设备动作",-1),Ga=c("br",null,null,-1),za=c("br",null,null,-1),Ua=c("br",null,null,-1),Ba=c("br",null,null,-1),Ha=c("br",null,null,-1),ja={__name:"manualboxtwo",setup(x){const _=s(0),M=()=>{var v={type:"fivetest",data:!0};console.log(JSON.stringify(v)),A({method:"post",url:"/api/ctrl/manualdata",data:JSON.stringify(v)}).then(i=>{Z.success("五米开始")}).catch(i=>{}).finally(()=>{})},f=()=>{var v={type:"fivetest",data:!1};console.log(JSON.stringify(v)),A({method:"post",url:"/api/ctrl/manualdata",data:JSON.stringify(v)}).then(i=>{Z.success("五米结束")}).catch(i=>{}).finally(()=>{})},N=s(1),y=Array.from({length:50}).map((v,i)=>({value:`${i+1}`,label:`${i+1}`})),k=()=>{var v={type:"excutetask",data:Number(N.value)};console.log(JSON.stringify(v)),A({method:"post",url:"/api/ctrl/manualdata",data:JSON.stringify(v)}).then(i=>{Z.success("设置任务")}).catch(i=>{}).finally(()=>{})},r=s(null),n=()=>{var v={type:"equipment",data:{axID:Number(_.value),direction:1}};console.log(JSON.stringify(v)),A({method:"post",url:"/api/ctrl/manualdata",data:JSON.stringify(v)}).then(i=>{Z.success("开始")}).catch(i=>{}).finally(()=>{})},o=()=>{clearTimeout(r.value);var v={type:"equipment",data:{axID:Number(_.value),direction:0}};console.log(JSON.stringify(v)),A({method:"post",url:"/api/ctrl/manualdata",data:JSON.stringify(v)}).then(i=>{}).catch(i=>{}).finally(()=>{}),Z.success("停止")},p=s(null),E=()=>{var v={type:"equipment",data:{axID:Number(_.value),direction:2}};console.log(JSON.stringify(v)),A({method:"post",url:"/api/ctrl/manualdata",data:JSON.stringify(v)}).then(i=>{Z.success("开始")}).catch(i=>{}).finally(()=>{})},b=()=>{clearTimeout(p.value);var v={type:"equipment",data:{axID:Number(_.value),direction:0}};console.log(JSON.stringify(v)),A({method:"post",url:"/api/ctrl/manualdata",data:JSON.stringify(v)}).then(i=>{}).catch(i=>{}).finally(()=>{}),Z.success("停止")},I=s(null),u=()=>{var v={type:"equipment",data:{axID:Number(_.value),direction:3}};console.log(JSON.stringify(v)),A({method:"post",url:"/api/ctrl/manualdata",data:JSON.stringify(v)}).then(i=>{Z.success("开始")}).catch(i=>{}).finally(()=>{})},K=()=>{clearTimeout(I.value);var v={type:"equipment",data:{axID:Number(_.value),direction:0}};console.log(JSON.stringify(v)),A({method:"post",url:"/api/ctrl/manualdata",data:JSON.stringify(v)}).then(i=>{}).catch(i=>{}).finally(()=>{}),Z.success("停止")};return(v,i)=>{const $=oe,q=Ae,h=_a,V=ya;return U(),j(De,null,[c("div",null,[c("div",Va,[La,Da,e($,{onClick:M,style:{"margin-left":"-5%"},type:"primary",icon:F(Le)},{default:a(()=>[g("开始")]),_:1},8,["icon"]),e($,{onClick:f,style:{"margin-left":"5%"},type:"primary",icon:F(re)},{default:a(()=>[g("停止")]),_:1},8,["icon"])]),c("div",Aa,[Oa,Pa,e(q,{modelValue:N.value,"onUpdate:modelValue":i[0]||(i[0]=L=>N.value=L),placeholder:"Activity count",options:F(y)},null,8,["modelValue","options"]),e($,{onClick:k,style:{"margin-left":"2%"},type:"primary",icon:F(re)},{default:a(()=>[g("设置")]),_:1},8,["icon"])])]),qa,Fa,c("div",Ja,[Ra,Ga,e(V,{modelValue:_.value,"onUpdate:modelValue":i[1]||(i[1]=L=>_.value=L),placeholder:"请选择",style:{"margin-left":"-9%"}},{default:a(()=>[e(h,{label:"举升",value:0}),e(h,{label:"转盘",value:1}),e(h,{label:"2",value:2}),e(h,{label:"3",value:3}),e(h,{label:"4",value:4}),e(h,{label:"5",value:5}),e(h,{label:"6",value:6})]),_:1},8,["modelValue"]),za,Ua,e($,{onMousedown:n,onMouseup:o,style:{"margin-left":"-10%"},type:"primary",icon:F(re)},{default:a(()=>[g("正向")]),_:1},8,["icon"]),e($,{onMousedown:E,onMouseup:b,style:{"margin-left":"-5%"},type:"primary",icon:F(re)},{default:a(()=>[g("反向")]),_:1},8,["icon"]),e($,{onMousedown:u,onMouseup:K,style:{"margin-left":"0%"},type:"primary",icon:F(ia)},{default:a(()=>[g("复位")]),_:1},8,["icon"])]),Ba,Ha],64)}}};const Q=x=>(ie("data-v-f57c2aa3"),x=x(),ce(),x),Xa={style:{"margin-left":"11%"}},Ya=Q(()=>c("h4",{style:{"margin-left":"27%"}},"控 制",-1)),Wa={style:{height:"60%","margin-top":"-52%",width:"100%","margin-left":"90%"}},Za=Q(()=>c("h4",{style:{"margin-left":"3%"}},"速 度",-1)),Qa={style:{"margin-left":"10%","margin-top":"10%"}},et=Q(()=>c("h4",null,"三 档 开 关",-1)),at=Q(()=>c("h4",null,"上 线",-1)),tt={style:{width:"40%","margin-left":"60%","margin-top":"-20%"}},lt=Q(()=>c("h4",null,"PLS 切区",-1)),ot={style:{margin:"0 auto"}},nt=Q(()=>c("h4",null,"上 线 点",-1)),st={style:{margin:"0 auto"}},ut=Q(()=>c("br",null,null,-1)),rt=Q(()=>c("div",{style:{width:"100%",height:"1px","background-color":"black"}},null,-1)),it=Q(()=>c("br",null,null,-1)),ct={__name:"manualbox",setup(x){const _=s(!1),M=s("DEF"),f=s(!1),N=s(""),y=s(""),k=Array.from({length:16}).map((d,l)=>({value:`${l}`,label:`${l}`})),r=Array.from({length:200}).map((d,l)=>({value:`${l+1}`,label:`${l+1}`})),n=s(!1),o=s("left"),p=s(0),E=s(0),b=s(),I=s(),u=G({id:"",text:"",params:{}}),K=s();let v=1;const i=G({id:1,text:"↖",params:{a:4}}),$=G({id:2,text:"↑",params:{a:0}}),q=G({id:3,text:"↗",params:{a:5}}),h=G({id:4,text:"←",params:{a:2}}),V=G({id:5,text:"×",params:{a:10}}),L=G({id:6,text:"→",params:{a:3}}),S=G({id:7,text:"↙",params:{a:6}}),B=G({id:8,text:"↓",params:{a:1}}),Y=G({id:9,text:"↘",params:{a:7}}),ee=G({id:10,text:"",params:{a:13}}),de=G({id:11,text:"",params:{a:12}});function H(d){n.value=!0,f.value==!0&&xe(),p.value=0,E.value=0,K.value=d,C(d),b.value=setInterval(()=>{O()},600)}const ye=s(null);function X(d){ye.value=setTimeout(()=>{n.value=!0,f.value==!0&&xe(),p.value=0,E.value=0,K.value=d,C(d),b.value=setInterval(()=>{O()},600)},500)}const m=()=>{n.value=!1,f.value==!0&&(I.value=setInterval(()=>{ge()},600),console.log("Start()")),clearTimeout(b.value),K.value="",b.value="",P(),clearTimeout(ye.value),clearTimeout(b.value)},C=d=>{switch(d){case 1:u.id=i.id,u.params=i.params;break;case 2:u.id=$.id,u.params=$.params;break;case 3:u.id=q.id,u.params=q.params;break;case 4:u.id=h.id,u.params=h.params;break;case 5:u.id=V.id,u.params=V.params;break;case 6:u.id=L.id,u.params=L.params;break;case 7:u.id=S.id,u.params=S.params;break;case 8:u.id=B.id,u.params=B.params;break;case 9:u.id=Y.id,u.params=Y.params;break;case 10:u.id=ee.id,u.params=ee.params;break;case 11:u.id=de.id,u.params=de.params;break}},O=()=>{p.value++;var d;_.value==!0&&(u.params.a==4||u.params.a==5||u.params.a==6||u.params.a==7)?(d={uCmdType:0,uCmdParm:u.params.a+4,uCmdParmExt:""},console.log("!!!PRESSING!!!")):_.value==!0&&(u.params.a==2||u.params.a==3)?d={uCmdType:0,uCmdParm:u.params.a+10,uCmdParmExt:""}:d={uCmdType:0,uCmdParm:u.params.a,uCmdParmExt:""},console.log(JSON.stringify(d)),console.log(typeof JSON.stringify(d)),A({method:"post",url:"/api/ctrl/manual",data:JSON.stringify(d)}).then(l=>{}).catch(l=>{}).finally(()=>{E.value++})};function J(){n.value=!1,f.value==!0&&(I.value=setInterval(()=>{ge()},600),console.log("Start()")),clearTimeout(b.value),K.value="",b.value=""}const P=()=>{n.value==!0&&(f.value==!0&&(I.value=setInterval(()=>{ge()},600),console.log("Start()")),clearTimeout(b.value),K.value="",b.value="",console.log("mouse leave"),n.value=!1)},te=()=>{let d="/api/ctrl/manual";v=1,pe(d)},he=()=>{let d="/api/ctrl/manual";v=2,pe(d)},fe=()=>{let d="/api/ctrl/manual";v=3,pe(d)},Oe=()=>{let d="/api/ctrl/manual";v=4,pe(d)},Pe=()=>{let d="/api/ctrl/manual";v=5,pe(d)},pe=(d,l)=>{var T={uCmdType:3,uCmdParm:v,uCmdParmExt:""};console.log(JSON.stringify(T)),console.log(typeof JSON.stringify(T)),A({method:"post",url:d,data:JSON.stringify(T)}).then(R=>{}).catch(R=>{}).finally(()=>{})},qe=()=>{var d={uCmdType:2,uCmdParm:0,uCmdParmExt:""};console.log(JSON.stringify(d)),console.log(typeof JSON.stringify(d)),A({method:"post",url:"/api/ctrl/manual",data:JSON.stringify(d)}).then(l=>{}).catch(l=>{}).finally(()=>{})},Fe=d=>{d==!0?(I.value=setInterval(()=>{ge()},600),console.log("Start()")):xe()},ge=()=>{console.log("number");var d={uCmdType:4,uCmdParm:12,uCmdParmExt:""};console.log(JSON.stringify(d)),A({method:"post",url:"/api/ctrl/manual",data:JSON.stringify(d)}).then(l=>{}).catch(l=>{}).finally(()=>{})};function xe(){console.log("onEnd()"),clearInterval(I.value),I.value=""}const Se=d=>{let l=1;switch(d.target.value){case"left":l=1;break;case"mid":l=2;break;case"right":l=3;break}var T={triswt:l};console.log(JSON.stringify(T)),console.log(typeof JSON.stringify(T)),A({method:"post",url:"/api/ctrl/triswt",data:JSON.stringify(T)}).then(R=>{}).catch(R=>{}).finally(()=>{})},Je=()=>{var d={plscut:Number(N.value)};console.log(JSON.stringify(d)),A({method:"post",url:"/api/ctrl/plscut",data:JSON.stringify(d)}).then(l=>{}).catch(l=>{}).finally(()=>{})},Re=()=>{var d={onlinepoint:Number(y.value)};console.log(JSON.stringify(d)),A({method:"post",url:"/api/ctrl/onlinepoint",data:JSON.stringify(d)}).then(l=>{}).catch(l=>{}).finally(()=>{})},Ge=()=>{_.value==!0?M.value="PRESS":M.value="DEF"};return(d,l)=>{const T=pa,R=ca,D=oe,we=va,ze=ga,Ue=fa,W=ma,Ce=ka,Be=ba,Me=Ae;return U(),j("div",null,[e(W,{style:{height:"80%",width:"70%"}},{default:a(()=>[c("div",Xa,[e(T,null,{default:a(()=>[Ya]),_:1}),e(T,{style:{"margin-bottom":"3%","margin-top":"3%","margin-left":"3%",height:"23%"}},{default:a(()=>[e(we,{style:{width:"100%"}},{default:a(()=>[e(D,{disabled:!f.value,onMouseleave:l[0]||(l[0]=w=>P()),onMousedown:l[1]||(l[1]=w=>H(i.id)),onMouseup:J,type:"info",onTouchstart:l[2]||(l[2]=w=>X(i.id)),onTouchend:m,style:{width:"17%",height:"100%","margin-left":"2px"}},{default:a(()=>[e(R,{size:"30"},{default:a(()=>[g(" ↖ ")]),_:1})]),_:1},8,["disabled"]),e(D,{disabled:!f.value,onMouseleave:l[3]||(l[3]=w=>P()),onMousedown:l[4]||(l[4]=w=>H($.id)),onMouseup:J,type:"info",onTouchstart:l[5]||(l[5]=w=>X($.id)),onTouchend:m,style:{width:"17%",height:"100%","margin-left":"2px"}},{default:a(()=>[e(R,{size:"30"},{default:a(()=>[g(" ↑ ")]),_:1})]),_:1},8,["disabled"]),e(D,{disabled:!f.value,onMouseleave:l[6]||(l[6]=w=>P()),onMousedown:l[7]||(l[7]=w=>H(q.id)),onMouseup:J,type:"info",onTouchstart:l[8]||(l[8]=w=>X(q.id)),onTouchend:m,style:{width:"17%",height:"100%","margin-left":"2px"}},{default:a(()=>[e(R,{size:"30"},{default:a(()=>[g(" ↗ ")]),_:1})]),_:1},8,["disabled"])]),_:1})]),_:1}),e(T,{style:{"margin-bottom":"3%",height:"23%","margin-left":"3%"}},{default:a(()=>[e(we,{style:{width:"100%"}},{default:a(()=>[e(D,{disabled:!f.value,onMouseleave:l[9]||(l[9]=w=>P()),onMousedown:l[10]||(l[10]=w=>H(h.id)),onMouseup:J,type:"info",onTouchstart:l[11]||(l[11]=w=>X(h.id)),onTouchend:m,style:{width:"17%",height:"100%","margin-left":"2px"}},{default:a(()=>[e(R,{size:"30"},{default:a(()=>[g(" ← ")]),_:1})]),_:1},8,["disabled"]),e(D,{disabled:!f.value,onClick:d.changeClick,type:"info",style:{width:"17%",height:"100%","margin-left":"2px"}},{default:a(()=>[e(ze,{disabled:!f.value,onChange:Ge,modelValue:_.value,"onUpdate:modelValue":l[12]||(l[12]=w=>_.value=w),size:"large"},{default:a(()=>[g(_e(M.value),1)]),_:1},8,["disabled","modelValue"])]),_:1},8,["disabled","onClick"]),e(D,{disabled:!f.value,onMouseleave:l[13]||(l[13]=w=>P()),onMousedown:l[14]||(l[14]=w=>H(L.id)),onMouseup:J,type:"info",onTouchstart:l[15]||(l[15]=w=>X(L.id)),onTouchend:m,style:{width:"17%",height:"100%","margin-left":"2px"}},{default:a(()=>[e(R,{size:"30"},{default:a(()=>[g(" → ")]),_:1})]),_:1},8,["disabled"])]),_:1})]),_:1}),e(T,{style:{"margin-bottom":"3%",height:"23%","margin-left":"3%"}},{default:a(()=>[e(we,{style:{width:"100%"}},{default:a(()=>[e(D,{disabled:!f.value,onMouseleave:l[16]||(l[16]=w=>P()),onMousedown:l[17]||(l[17]=w=>H(S.id)),onMouseup:J,type:"info",onTouchstart:l[18]||(l[18]=w=>X(S.id)),onTouchend:m,style:{width:"17%",height:"100%","margin-left":"2px"}},{default:a(()=>[e(R,{size:"30"},{default:a(()=>[g(" ↙ ")]),_:1})]),_:1},8,["disabled"]),e(D,{disabled:!f.value,onMouseleave:l[19]||(l[19]=w=>P()),onMousedown:l[20]||(l[20]=w=>H(B.id)),onMouseup:J,type:"info",onTouchstart:l[21]||(l[21]=w=>X(B.id)),onTouchend:m,style:{width:"17%",height:"100%","margin-left":"2px"}},{default:a(()=>[e(R,{size:"30"},{default:a(()=>[g(" ↓ ")]),_:1})]),_:1},8,["disabled"]),e(D,{disabled:!f.value,onMouseleave:l[22]||(l[22]=w=>P()),onMousedown:l[23]||(l[23]=w=>H(Y.id)),onMouseup:J,type:"info",onTouchstart:l[24]||(l[24]=w=>X(Y.id)),onTouchend:m,style:{width:"17%",height:"100%","margin-left":"2px"}},{default:a(()=>[e(R,{size:"30"},{default:a(()=>[g(" ↘ ")]),_:1})]),_:1},8,["disabled"])]),_:1})]),_:1}),e(Ue,{onChange:Fe,modelValue:f.value,"onUpdate:modelValue":l[25]||(l[25]=w=>f.value=w),"active-text":"Open","inactive-text":"Close"},null,8,["modelValue"])]),c("div",Wa,[e(T,null,{default:a(()=>[Za]),_:1}),e(T,null,{default:a(()=>[e(D,{onClick:te,type:"success",style:{width:"15%","margin-bottom":"-2%"}},{default:a(()=>[g("1 级")]),_:1})]),_:1}),e(T,null,{default:a(()=>[e(D,{onClick:he,type:"success",style:{width:"15%","margin-bottom":"-2%"}},{default:a(()=>[g("2 级")]),_:1})]),_:1}),e(T,null,{default:a(()=>[e(D,{onClick:fe,type:"success",style:{width:"15%","margin-bottom":"-2%"}},{default:a(()=>[g("3 级")]),_:1})]),_:1}),e(T,null,{default:a(()=>[e(D,{onClick:Oe,type:"success",style:{width:"15%","margin-bottom":"-2%"}},{default:a(()=>[g("4 级")]),_:1})]),_:1}),e(T,null,{default:a(()=>[e(D,{onClick:Pe,type:"success",style:{width:"15%","margin-bottom":"-2%"}},{default:a(()=>[g("5 级")]),_:1})]),_:1})])]),_:1}),c("div",Qa,[e(W,{style:{"margin-left":"10%"}},{default:a(()=>[et]),_:1}),e(W,{style:{"margin-top":"1%"}},{default:a(()=>[e(Be,{modelValue:o.value,"onUpdate:modelValue":l[26]||(l[26]=w=>o.value=w),style:{margin:"0 auto"}},{default:a(()=>[e(Ce,{onChange:Se,size:"large",label:"left"},{default:a(()=>[g("手动")]),_:1}),e(Ce,{onChange:Se,size:"large",label:"mid"},{default:a(()=>[g("空闲")]),_:1}),e(Ce,{onChange:Se,size:"large",label:"right"},{default:a(()=>[g("自动")]),_:1})]),_:1},8,["modelValue"])]),_:1}),e(W,{style:{"margin-left":"10%","margin-top":"3%"}},{default:a(()=>[at]),_:1}),e(W,{style:{"margin-left":"6%","margin-top":"1%"}},{default:a(()=>[e(D,{onClick:qe,size:"large",style:{margin:"0 auto"},type:"primary",icon:F(Le)},{default:a(()=>[g("上线")]),_:1},8,["icon"])]),_:1})]),c("div",tt,[e(W,null,{default:a(()=>[lt]),_:1}),e(W,null,{default:a(()=>[c("div",ot,[e(T,{prop:"count"},{default:a(()=>[e(Me,{modelValue:N.value,"onUpdate:modelValue":l[27]||(l[27]=w=>N.value=w),placeholder:"Activity count",options:F(k)},null,8,["modelValue","options"]),e(D,{onClick:Je,style:{"margin-left":"2px"},type:"primary",icon:F(re)},{default:a(()=>[g("设置")]),_:1},8,["icon"])]),_:1})])]),_:1}),e(W,{style:{"margin-top":"10%"}},{default:a(()=>[nt]),_:1}),e(W,null,{default:a(()=>[c("div",st,[e(T,{prop:"count"},{default:a(()=>[e(Me,{modelValue:y.value,"onUpdate:modelValue":l[28]||(l[28]=w=>y.value=w),placeholder:"Activity count",options:F(r)},null,8,["modelValue","options"]),e(D,{onClick:Re,style:{"margin-left":"2px"},type:"primary",icon:F(re)},{default:a(()=>[g("设置")]),_:1},8,["icon"])]),_:1})])]),_:1})]),ut,rt,it,e(ja)])}}},vt=le(ct,[["__scopeId","data-v-f57c2aa3"]]);const Ie=x=>(ie("data-v-7d4ff067"),x=x(),ce(),x),dt={key:0},ft={key:1,class:"better"},pt={class:"dianchi"},mt=Ie(()=>c("br",null,null,-1)),_t=Ie(()=>c("br",null,null,-1)),yt=Ie(()=>c("br",null,null,-1)),gt={__name:"conagv",setup(x){const _=s(!1),M=()=>{_.value=!0},f=s(!1),N=()=>{f.value=!f.value},y=s(0),k=z(()=>(t.value.nAgvState===0?y.value="加载中":t.value.nAgvState===1?y.value="空闲":t.value.nAgvState===2?y.value="手动":t.value.nAgvState===3&&(y.value="自动"),t.value.event.name===""?Ee.value=1:Ee.value=2,[{key:"车号",value:3,key2:"模式",value2:y.value},{key:"开始路段",value:t.value.tcInfo.uFromNode,key2:"结束路段",value2:t.value.tcInfo.uToNode},{key:"理论位置",value:`(${t.value.tcInfo.iDevX},${t.value.tcInfo.iDevY})`,key2:"当前位置",value2:`(${t.value.navInfo.fRealX.toFixed(3)},${-t.value.navInfo.fRealY.toFixed(3)})`},{key:"事件",value:t.value.event.name,key2:"原因",value2:t.value.event.detail},{key:"建议",value:t.value.event.advise,key2:"",value2:""}]));return(r,n)=>{const o=oe,p=se,E=ue,b=ne;return U(),j("div",{class:Te(f.value?"agv2":"agv")},[c("div",{class:Te(f.value?"table2":"table")},[e(o,{onClick:N,class:"button",type:"text"},{default:a(()=>[g(_e(f.value?"＋":"一"),1)]),_:1}),f.value?(U(),j("div",dt," AGV ")):Ke("",!0),f.value?Ke("",!0):(U(),j("div",ft,[c("div",pt,[g(" 电量百分比："+_e(F(t).electricalModule.sensor.battmetr.fCapPercent.toFixed(2)),1),mt,g(" 电池状态："+_e(F(t).electricalModule.sensor.battmetr.sState),1),_t]),e(E,{data:k.value,border:"",class:"datatable"},{default:a(()=>[e(p,{prop:"key",label:"AGV"}),e(p,{prop:"value"}),e(p,{prop:"key2"}),e(p,{prop:"value2"})]),_:1},8,["data"]),e(o,{class:"fuwei",type:"info"},{default:a(()=>[g("复位")]),_:1}),e(o,{class:"quxiaorenwu",type:"info"},{default:a(()=>[g("取消任务")]),_:1}),e(o,{class:"jusheng",type:"info"},{default:a(()=>[g("举升")]),_:1}),e(o,{class:"fangxia",type:"info"},{default:a(()=>[g("放下")]),_:1}),e(o,{class:"quchongdian",type:"info"},{default:a(()=>[g("去充电")]),_:1}),e(o,{class:"shoudongkongzhi",type:"info",onClick:M},{default:a(()=>[g("手动控制")]),_:1})])),e(b,{modelValue:_.value,"onUpdate:modelValue":n[0]||(n[0]=I=>_.value=I),title:"手动控制",modal:!1,draggable:"","close-on-click-modal":!1,"modal-class":"kkk-dialog-class","custom-class":"ele-dialog"},{default:a(()=>[yt,e(vt)]),_:1},8,["modelValue"])],2)],2)}}},kt=le(gt,[["__scopeId","data-v-7d4ff067"]]),bt={AgvEquipmentInfo:[{Key:" eServoRelayCheck",value:"举升伺服未上电"},{Key:" eEmgCheck",value:"急停按下"},{Key:" eIoMarkCheck",value:"未发现地标"},{Key:" eMagnetDevCheck",value:"左右磁导航偏差过大"},{Key:" eFindLifterError",value:"举升伺服故障"},{Key:" eFindCarrierError",value:"整体轴伺服报错"},{Key:" eLifterSyncError",value:"举升编码器同步错误"},{Key:" elifterCentreCheck",value:"同步开关错误"},{Key:" elifterPositionCheck",value:"位置开关校验高度错误"},{Key:" elifterPositionCheckHight",value:"高度校验位置开关错误"},{Key:" ePreLifterHeightCheck",value:"举升任务高度错误"},{Key:" eLifterTopNotSafe",value:"举升高度不安全"},{Key:" eSecondAxisCheckCargoStatus",value:"副轴货物状态异常"},{Key:" eFirstAxisCheckCargoStatus",value:"主轴货物状态异常"},{Key:" eSecondAxisCargoExist",value:"副轴货物存在"},{Key:" eFirstAxisCargoExist",value:"主轴货物存在"},{Key:" eSecondAxisCargoNotExist",value:"副轴货物不存在"},{Key:" eFirstAxisCargoNotExist",value:"主轴货物不存在"},{Key:" eLifterHeightCheckright",value:"举升位置不安全"},{Key:" resume",value:"复位设备伺服"},{Key:" LifterAutoGotoHeight",value:"举升运动中"},{Key:" FirstAxisCargoNotExist",value:"主轴送货完成后发现货物"},{Key:" SecondAxisCargoNotExist",value:"副轴送货完成后发现货物"},{Key:" FirstAxisCargoExist",value:"主轴取货完成后未发现货物"},{Key:" SecondAxisCargoExist",value:"副轴取货完成后未发现货物"},{Key:" LifterReset",value:"举升复位到0"},{Key:" CarrierAutoGotoHeight",value:"整体轴运动中"},{Key:" CameraCheck",value:"获得工作模式并检查是否超时"},{Key:" eStartModeErr",value:"开始工作模式错误"},{Key:" eEndModeErr",value:"结束工作模式错误"},{Key:" eStateErr",value:"3D相机工作状态错误"},{Key:" eGoodExistErr",value:"前方货架有货"},{Key:" LifterAxis_Up",value:"举升轴上限位检测"},{Key:" LifterAxis_Down",value:"举升轴下限位检测"},{Key:" eLifterServoErr",value:"举升伺服故障"},{Key:" TurnAxis_Up",value:"旋转轴限位检测"},{Key:" TurnAxis_Down",value:"旋转轴限位检测"},{Key:" TurnAxis_Gohome",value:"旋转轴校零"},{Key:" LifterAxis_Gohome",value:"举升轴校零"},{Key:" eEmgbtnPressed",value:"急停按下"},{Key:" CheckDeltaAng",value:"角度补偿检测"},{Key:" StartLoadTune",value:"开始载货调整"},{Key:" ClearDeltaAng",value:"清除角度补偿"},{Key:" CheckDeltaY",value:"Y轴补偿检测"},{Key:" ClearDeltaY",value:"清除Y轴补偿"},{Key:" EndTune",value:"结束载货"},{Key:" CheckDeltaX",value:"X轴补偿检测"},{Key:" AutoGotoTopExt",value:"举升轴到上限位"},{Key:" eNotfindtheTop",value:"举升轴找不到上限位"},{Key:" LifterHeightCheck",value:"举升轴高度检测"},{Key:" CargoCheck",value:"货物检测"},{Key:" eLoadCargoExistError",value:"货物不存在"},{Key:" UpdateGryoPos",value:"更新惯导位置"},{Key:" CargoExist",value:"货物存在"},{Key:" StartUnLoadTune",value:"开始卸载调整"},{Key:" HandleUnLoadCheck",value:"卸货检查"},{Key:" eRackAngleNotSafe",value:"转盘角度不安全"},{Key:" AutoGotoBottomExt",value:"举升轴到下限位"},{Key:" eLifterBottomNotSafe",value:"举升轴到底不安全"},{Key:" eUnLoadCargoExistError",value:"货物未卸载"},{Key:" StartSyncSpin",value:"开始同步旋转"},{Key:" eSpinDiffOverLimit",value:"自旋角度超限"},{Key:" eRackServoErr",value:"旋转伺服故障"},{Key:" HandleSyncSpin",value:"处理同步旋转"},{Key:" EndSyncSpin",value:"结束同步旋转"},{Key:" StartCameraCheck",value:"开始3D相机检测"},{Key:" SpinCheck",value:"旋转检测"},{Key:" Start",value:"自旋准备"},{Key:" RackRun",value:"开始自旋"},{Key:" End",value:"结束自旋"},{Key:" ClearNavDeltaAng",value:"清除导航补偿角度"},{Key:" eCanNotGetNavThita",value:"无法得到导航角度"},{Key:" eCanNotGetNavY",value:"无法得到导航角度"},{Key:" eCanNotGetNavX",value:"无法得到导航角度"},{Key:" CheckNavAng",value:"检测导航角度"},{Key:" CheckNavAng",value:"检测导航角度"}]};const be=x=>(ie("data-v-7516be3b"),x=x(),ce(),x),ht=be(()=>c("span",{style:{"font-size":"18px"}}," 车体设备",-1)),xt=be(()=>c("br",null,null,-1)),St=be(()=>c("br",null,null,-1)),wt=be(()=>c("br",null,null,-1)),Ct={__name:"dev",setup(x){const _=s(!1),M=()=>{_.value=!0},f=z(()=>[{key:"转盘纵向开关",value:t.value.equipmentInfo.rack.turn_axis.bZero?"🔴":"🟢",key2:"转盘横向开关",value2:t.value.equipmentInfo.rack.turn_axis.bLevel?"🔴":"🟢"},{key:"转盘位置",value:(t.value.equipmentInfo.rack.turn_axis.fAxisPosition/1e3).toFixed(3),key2:"",value2:""}]),N=z(()=>[{key:"举升高位开关",value:t.value.equipmentInfo.rack.lifter_axis.bTop?"🔴":"🟢",key2:"举升零位开关",value2:t.value.equipmentInfo.rack.lifter_axis.bBottom?"🔴":"🟢"},{key:"举升位置",value:t.value.equipmentInfo.rack.lifter_axis.fAxisPosition.toFixed(3),key2:"",value2:""}]),y=s(0),k=s(0),r=s(0),n=s(0),o=s(0),p=z(()=>{if(y.value=t.value.equipmentInfo.uEquipmentState,y.value===0?y.value="其他":y.value===1?y.value="开始":y.value===2?y.value="暂停":y.value===3&&(y.value="结束"),n.value=t.value.equipmentInfo.uEquipmentTaskError,n.value===0&&(n.value="无故障"),k.value=t.value.equipmentInfo.uEquipmentTaskID,k.value===0)r.value="无任务",o.value="无";else{o.value=t.value.equipmentInfo.strEquipmentTaskMessage;const b=bt.AgvEquipmentInfo.reduce((I,u)=>(I[u.Key]=u.value,I),{})[o.value]||"";o.value=b,r.value=t.value.equipmentInfo.uEquipmentTaskState,r.value===0?r.value="运行中":r.value===1?r.value="结束":r.value===-1&&(r.value="无任务")}return[{key:"当前设备状态",value:y.value,key2:"当前设备任务号",value2:k.value},{key:"当前设备任务状态",value:r.value,key2:"当前设备故障码",value2:n.value},{key:"当前设备动作步骤",value:o.value,key2:"当前动作轴id",value2:""},{key:"当前动作轴位置",value:"",key2:"当前动作轴开关状态",value2:""}]});return(E,b)=>{const I=oe,u=se,K=ue,v=ne;return U(),j("div",null,[e(I,{class:"controldev",type:"info",onClick:M},{default:a(()=>[ht]),_:1}),e(v,{modelValue:_.value,"onUpdate:modelValue":b[0]||(b[0]=i=>_.value=i),title:"车体设备",modal:!1,draggable:"","close-on-click-modal":!1,"modal-class":"kkk-dialog-class","custom-class":"ele-dialog"},{default:a(()=>[xt,e(K,{data:f.value,border:"",style:{width:"90%","margin-left":"5%"}},{default:a(()=>[e(u,{prop:"key",label:"转盘"}),e(u,{prop:"value"}),e(u,{prop:"key2"}),e(u,{prop:"value2"})]),_:1},8,["data"]),St,e(K,{data:N.value,border:"",style:{width:"90%","margin-left":"5%"}},{default:a(()=>[e(u,{prop:"key",label:"举升"}),e(u,{prop:"value"}),e(u,{prop:"key2"}),e(u,{prop:"value2"})]),_:1},8,["data"]),wt,e(K,{data:p.value,border:"",style:{width:"90%","margin-left":"5%"}},{default:a(()=>[e(u,{prop:"key",label:"设备信息"}),e(u,{prop:"value"}),e(u,{prop:"key2"}),e(u,{prop:"value2"})]),_:1},8,["data"])]),_:1},8,["modelValue"])])}}},Et=le(Ct,[["__scopeId","data-v-7516be3b"]]);const It=x=>(ie("data-v-4c89509f"),x=x(),ce(),x),Mt=It(()=>c("span",{style:{"font-size":"18px"}}," 控制台",-1)),Nt={__name:"tc",setup(x){const _=s(!1),M=()=>{_.value=!0},f=s(0),N=s(0),y=s(0),k=s(0),r=s(0),n=s(0),o=s(0),p=s(0),E=s(0),b=s(0),I=s(0),u=s(0),K=s(0),v=z(()=>{switch(K.value=t.value.tcInfo.sHeading,k.value=t.value.tcInfo.sCurSpeed,n.value=t.value.tcInfo.uWorkState,n.value===1?n.value="运行":n.value===2?n.value="挂起":n.value===3?n.value="静态OP":n.value===4?n.value="充电":n.value===5?n.value="等待":n.value===6?n.value="睡眠":n.value===0?n.value="空闲":n.value===7&&(n.value="唤醒"),o.value=t.value.tcInfo.ucEventState,o.value){case 0:o.value="无故障";break;case 1:o.value=" 自旋误差超限";break;case 2:o.value="导航误差超限";break;case 3:o.value="位置校验失败";break;case 4:o.value="地标信号异常";break;case 5:o.value="磁导航通讯超时";break;case 6:o.value="惯导信息故障";break;case 7:o.value="定位模块通讯中断";break;case 30:o.value="CAN通讯超时";break;case 31:o.value="CanOpen伺服故障";break;case 32:o.value="舵碰限位";break;case 33:o.value="车轮过热";break;case 34:o.value="自制伺服故障";break;case 35:o.value="Mcu重启";break;case 36:o.value="IO检测板故障";break;case 37:o.value="机械臂网络连接断开";break;case 60:o.value="车载设备故障";break;case 61:o.value="设备车体互锁";break;case 90:o.value="伺服电源故障";break;case 91:o.value="用户紧急停车";break;case 92:o.value="硬件保险杠碰撞";break;case 93:o.value="PLS近距离急停";break;case 94:o.value="PLS中距离停车";break;case 95:o.value="PLS切区错误";break;case 96:o.value="3D相机状态错误";break;case 97:o.value="软pls状态错误";break;case 120:o.value="控制台挂起";break;case 121:o.value="网络通讯超时";break;case 122:o.value="控制台任务删除";break;case 123:o.value="禁止上线";break;case 124:o.value="AGV紧急停车";break;case 125:o.value="任务错误";break;case 150:o.value="电池电量低";break;case 151:o.value="电池电量太低";break;case 152:o.value="充电失败";break;case 153:o.value="电池系统故障";break;case 180:o.value="地图信息错误";break;case 210:o.value="用户暂停";break}return p.value=t.value.tcInfo.usEventDetail,p.value===0&&(p.value="无故障"),I.value=t.value.tcInfo.usTaskID,u.value=t.value.tcInfo.usKey,b.value=t.value.tcInfo.ucTaskState,t.value.nAgvState===3?b.value===1?b.value="开始":b.value===2?b.value="运行中":b.value===3&&(b.value="结束"):b.value="无任务",r.value=t.value.tcInfo.usCargoState,r.value===0?r.value="未载货":r.value===1&&(r.value="载货"),E.value=t.value.tcInfo.usBatterState,E.value===0?E.value="无需充电":E.value===1?E.value="正常电量":E.value===2?E.value="电量低":E.value===3&&(E.value="电量极低"),f.value=t.value.tcInfo.uFromNode,N.value=t.value.tcInfo.uToNode,y.value=t.value.tcInfo.sProgress,[{key:"开始节点",value:f.value,key2:"目标节点",value2:N.value},{key:"当前进度量",value:y.value,key2:"控制台设置速度",value2:k.value},{key:"货物状态",value:r.value,key2:"工作状态",value2:n.value},{key:"1级故障码",value:o.value,key2:"2级故障码",value2:p.value},{key:"电池状态",value:E.value,key2:"",value2:""},{key:"任务状态",value:b.value,key2:"任务号",value2:I.value},{key:"动作key",value:u.value,key2:"heading",value2:K.value}]});return(i,$)=>{const q=oe,h=se,V=ue,L=ne;return U(),j("div",null,[e(q,{class:"controlnav",type:"info",onClick:M},{default:a(()=>[Mt]),_:1}),e(L,{modelValue:_.value,"onUpdate:modelValue":$[0]||($[0]=S=>_.value=S),title:"控制台信息",modal:!1,draggable:"","close-on-click-modal":!1,"modal-class":"kkk-dialog-class","custom-class":"ele-dialog"},{default:a(()=>[e(V,{data:v.value,border:"",style:{width:"90%","margin-left":"5%","background-color":"rgba(255, 255, 255, 0.5)"}},{default:a(()=>[e(h,{prop:"key"}),e(h,{prop:"value"}),e(h,{prop:"key2"}),e(h,{prop:"value2"})]),_:1},8,["data"])]),_:1},8,["modelValue"])])}}},Kt=le(Nt,[["__scopeId","data-v-4c89509f"]]),Tt=c("br",null,null,-1),$t={__name:"screen_info",setup(x,{expose:_}){const M=s(!1);_({handleMouseClick:y=>{const k=ke.intersectObjects([y]);k.length>0&&(console.log("modelname:",k[0].object.name),k[0].object.name==="screen"||k[0].object.name==="screen1"||k[0].object.name==="screen2"||k[0].object.name==="screen3"||k[0].object.name==="screen4"?M.value=!0:M.value=!1)}});const N=z(()=>[{key:"屏幕型号",value:0,key2:"通讯类型",value2:0,key3:"手控设备信息",value3:0}]);return(y,k)=>{const r=se,n=ue,o=ne;return U(),da(o,{modelValue:M.value,"onUpdate:modelValue":k[0]||(k[0]=p=>M.value=p),title:"屏幕","custom-class":"ele-dialog",modal:!1},{default:a(()=>[Tt,e(n,{data:N.value,border:"",style:{width:"90%","margin-left":"5%"}},{default:a(()=>[e(r,{prop:"key",label:"设备信息"}),e(r,{prop:"value"}),e(r,{prop:"key2"}),e(r,{prop:"value2"}),e(r,{prop:"key3"}),e(r,{prop:"value3"})]),_:1},8,["data"])]),_:1},8,["modelValue"])}}},Vt=c("br",null,null,-1),Lt=c("br",null,null,-1),Dt={__name:"wheel_info",setup(x,{expose:_}){const M=s(!1),f=s(!1);_({handleMouseClickwheel:k=>{const r=ke.intersectObjects([k]);r.length>0&&(r[0].object.name==="rightwheel"||r[0].object.name==="rightwheel1"||r[0].object.name==="rightwheel2"?M.value=!0:M.value=!1,r[0].object.name==="leftwheel"||r[0].object.name==="leftwheel1"||r[0].object.name==="leftwheel2"?f.value=!0:f.value=!1)}});const y=z(()=>[{key:"驱动内坐标X",value:0,key2:"驱动内坐标Y",value2:0},{key:"电机减速比",value:0,key2:"车轮直径",value2:0},{key:"码盘线束",value:0,key2:"最大转速",value2:0}]);return(k,r)=>{const n=se,o=ue,p=ne;return U(),j(De,null,[e(p,{modelValue:M.value,"onUpdate:modelValue":r[0]||(r[0]=E=>M.value=E),title:"右轮","custom-class":"ele-dialog",modal:!1},{default:a(()=>[Vt,e(o,{data:y.value,border:"",style:{width:"90%","margin-left":"5%"}},{default:a(()=>[e(n,{prop:"key",label:"设备信息"}),e(n,{prop:"value"}),e(n,{prop:"key2"}),e(n,{prop:"value2"})]),_:1},8,["data"])]),_:1},8,["modelValue"]),e(p,{modelValue:f.value,"onUpdate:modelValue":r[1]||(r[1]=E=>f.value=E),title:"左轮","custom-class":"ele-dialog",modal:!1},{default:a(()=>[Lt,e(o,{data:y.value,border:"",style:{width:"90%","margin-left":"5%"}},{default:a(()=>[e(n,{prop:"key",label:"设备信息"}),e(n,{prop:"value"}),e(n,{prop:"key2"}),e(n,{prop:"value2"})]),_:1},8,["data"])]),_:1},8,["modelValue"])],64)}}};const At={class:"home"},Ve=500,Ot={__name:"index",setup(x){const _=s([]),M=new sa,f=s(null),N=s(null);let y=0;const k=s(null),r=()=>{A({method:"post",url:"/api/data/easylog",data:JSON.stringify({group:"siasun",account:"test",password:"123456"})}).then(C=>{if(k.value=C.data,k.value.status!==204&&(t.value=k.value,_.value.push(t.value),S(),y===0))switch(t.value.uAgvType){case 0:M.load("./main/test.glb",O=>{i=O.scene,i.scale.set(1,.6,.7),i.rotation.set(0,Ne.degToRad(90),0),h.add(i),Y(),de(),H(),y=1},O=>{console.log(O.loaded/O.total*100+"% loaded")},O=>{console.error("Error loading model:",O)});break;default:return 0}}).catch(C=>{}).finally(()=>{}),ra.value=setTimeout(r,500)};$e(()=>{r()});const n=new me(16777215,1);n.position.set(0,0,10);const o=new me(16777215,1);o.position.set(0,0,-10);const p=new me(16777215,1);p.position.set(10,0,0);const E=new me(16777215,1);E.position.set(-10,0,0);const b=new me(16777215,1);b.position.set(0,10,0);const I=new je({antialias:!0});I.setSize(window.innerWidth,window.innerHeight),I.setClearColor(16777215);const u=()=>{B(),I.render(h,V),K&&K.update(),requestAnimationFrame(u)};let K,v,i,$=s(null);const q=new Xe,h=new Ye,V=new We(75,window.innerWidth/window.innerHeight,.1,1e3);V.position.set(0,2,6);let L=null;const S=()=>{L&&h.remove(L);const m=new Qe({color:255,linewidth:1}),C=_.value.map(P=>new ea(P.navInfo.fRealX.toFixed(3),0,-P.navInfo.fRealY.toFixed(3))),O=new aa().setFromPoints(C);let J=new ta(O,m);h.add(J),L=J},B=()=>{if(i&&t.value!==void 0&&!t.value.status){const m=t.value;i.position.set(m.navInfo.fRealX.toFixed(3),0,-m.navInfo.fRealY.toFixed(3));const C=new la(0,Ne.degToRad((m.navInfo.fRealThita*180/Math.PI).toFixed(3)),0,"XYZ"),O=new oa().setFromEuler(C);i.setRotationFromQuaternion(O)}},Y=()=>{i.traverse(m=>{if(m.name==="screen2"){const C=Math.random()*16777215;m.material.color.setHex(C)}}),setTimeout(Y,500)};let ee=1;const de=()=>{const C={1:{on:65280,off:16777215},2:{on:16711680,off:16777215}}[Ee.value],O=C.on,J=C.off,P=(te,he)=>{te.traverse(fe=>{fe instanceof na&&(fe.material.color.clone(),fe.material.color.set(he))})};i.traverse(te=>{te.name==="light"&&(ee===1?P(te,O):P(te,J))}),ee=1-ee,setTimeout(de,1e3)},H=()=>{i.traverse(m=>{if(m.name==="upDown"&&(m.rotation.y=(t.value.equipmentInfo.rack.turn_axis.fAxisPosition/1e3).toFixed(2),m.position.y=t.value.equipmentInfo.rack.lifter_axis.fAxisPosition+1e3),m.name==="leftwheel"&&(m.rotation.z+=t.value.electricalModule.kinematic.drive[0].wheel.fServoSpeed.toFixed(5)*.5),m.name==="rightwheel"&&(m.rotation.z+=t.value.electricalModule.kinematic.drive[1].wheel.fServoSpeed.toFixed(5)*.5),m.name==="turnnei")if(t.value.equipmentInfo.rack.turn_axis.bLevel){const C=new ae({color:16711680});m.material=C}else{const C=new ae({color:65280});m.material=C}if(m.name==="turnwai")if(t.value.equipmentInfo.rack.turn_axis.bZero){const C=new ae({color:16711680});m.material=C}else{const C=new ae({color:65280});m.material=C}if(m.name==="liftertop")if(t.value.equipmentInfo.rack.lifter_axis.bTop){const C=new ae({color:16711680});m.material=C}else{const C=new ae({color:65280});m.material=C}if(m.name==="lifterbuttom")if(t.value.equipmentInfo.rack.lifter_axis.bBottom){const C=new ae({color:16711680});m.material=C}else{const C=new ae({color:65280});m.material=C}}),requestAnimationFrame(H)},ye=m=>{q.x=m.clientX/window.innerWidth*2-1,q.y=-(m.clientY/window.innerHeight)*2+1,ke.setFromCamera(q,V),i!==void 0&&ke.intersectObjects([i]).length>0},X=()=>{};return $e(()=>{window.addEventListener("mousemove",ye),window.addEventListener("mouseout",X),window.addEventListener("click",()=>{f.value.handleMouseClick(i)}),window.addEventListener("click",()=>{N.value.handleMouseClickwheel(i)}),$.value.appendChild(I.domElement),v=new Ze(Ve,Ve),v.material.opacity=.3,v.material.transparent=!0,h.add(v),K=new ua(V,I.domElement),K.update(),h.add(n),h.add(o),h.add(p),h.add(E),h.add(b),u()}),(m,C)=>(U(),j("div",At,[c("div",{class:"canvas-container",ref_key:"canvasDom",ref:$},null,512),e(wa),e($a),e(Et),e(Kt),e(kt),e($t,{ref_key:"screenRef",ref:f},null,512),e(Dt,{ref_key:"wheelRef",ref:N},null,512)]))}},il=le(Ot,[["__scopeId","data-v-8601ff12"]]);export{il as default};

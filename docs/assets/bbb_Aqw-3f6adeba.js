import{aV as c,aK as z,o as F,c as P,b as D,f as V,m as y,bc as R,bl as U,F as $,a as b,l as q,E as K}from"./index-df7e4a51.js";import{g as L,i as X}from"./index-c13506ae.js";import{a1 as Y}from"./bbb_Aqw.vue_vue_type_style_index_0_lang-9407596a.js";import"./three.module-2fa5ea98.js";const G=b("br",null,null,-1),J=b("br",null,null,-1),Q=b("div",{id:"chart-container"},null,-1),ot={__name:"bbb_Aqw",setup(W){let v=c(""),s=0;const w=c(""),E=c("");let o=[];const h=c(0),S=c(100),B=()=>{s>0&&(s--,x())},N=()=>{s<o[0].StatisticsData.length-1&&(s++,x())},I=()=>{const d=L(document.getElementById("chart-container")),t=Math.max(0,Math.min(h.value,100)),e=Math.max(0,Math.min(S.value,100)),a={dataZoom:[{show:!1,type:"slider",start:t,end:e}]};d.setOption(a)},x=()=>{const d=document.getElementById("chart-container"),t=X(d),e=new Date(w.value),a=new Date(E.value);v.value=o[0].StatisticsData[s].name;const r=e&&a&&!isNaN(e.getTime())&&!isNaN(a.getTime());let m;if(r){const n=(e.getMonth()+1).toString().padStart(2,"0"),l=e.getDate().toString().padStart(2,"0"),i=e.getHours().toString().padStart(2,"0"),p=e.getMinutes().toString().padStart(2,"0"),f=n+l+i+p+"00000",_=(a.getMonth()+1).toString().padStart(2,"0"),A=a.getDate().toString().padStart(2,"0"),C=a.getHours().toString().padStart(2,"0"),k=a.getMinutes().toString().padStart(2,"0"),H=_+A+C+k+"99999";o.forEach(g=>{g.logDateTimea=g.logDateTime.substring(5).replace(/\D/g,"")}),console.log(o[1].logDateTime,o[1].logDateTimea);let O=parseInt(f),j=parseInt(H);m=o.filter(g=>{const T=g.logDateTimea;return T>=O&&T<=j})}else m=o;const u=m.map(n=>n.logDateTime),M=m.map(n=>n.StatisticsData[s].value),Z={xAxis:{type:"category",data:u},yAxis:{type:"value"},series:[{type:"line",data:M}],tooltip:{trigger:"axis",formatter:n=>{const{name:l,value:i}=n[0];return`时间: ${l}<br/>取值: ${i}<br/>`}},dataZoom:[{show:!1,type:"slider"}]};t.on("dataZoom",({start:n,end:l})=>{const i=Math.round(n*(u.length-1)),p=Math.round(l*(u.length-1)),f=u.slice(i,p+1),_=M.slice(i,p+1);t.setOption({xAxis:{data:f},series:[{data:_}]})}),t.setOption(Z),t.setOption({toolbox:{feature:{saveAsImage:{name:"chart",title:"保存图表",pixelRatio:2}}}})};return z(()=>{o=Y.parsedLogData_b,x()}),(d,t)=>{const e=q,a=K;return F(),P($,null,[D(e,{onClick:B},{default:V(()=>[y("＜")]),_:1}),y(" "+R(U(v))+" ",1),D(e,{onClick:N},{default:V(()=>[y("＞")]),_:1}),G,D(a,{type:"number",modelValue:h.value,"onUpdate:modelValue":t[0]||(t[0]=r=>h.value=r),onInput:I,min:0,style:{width:"30%"}},null,8,["modelValue"]),D(a,{type:"number",modelValue:S.value,"onUpdate:modelValue":t[1]||(t[1]=r=>S.value=r),onInput:I,max:100,style:{width:"30%"}},null,8,["modelValue"]),J,Q],64)}}};export{ot as default};

import{_ as C,aV as a,o as E,c as L,a as d,b as o,f as c,cn as b,E as V,l as U,m as v,p as B,q as I}from"./index-df7e4a51.js";import{a as N,E as R}from"./el-table-column-77720c0d.js";import"./el-tag-cac9c3fa.js";import"./el-tooltip-4ed993c7.js";import"./el-popper-d7ccd5c0.js";import"./el-scrollbar-1cd9d3fa.js";import"./index-344724fa.js";import"./_Uint8Array-f4037249.js";import"./_initCloneObject-b58f4364.js";import"./index-565d57e3.js";import"./debounce-8185d5a4.js";const S=s=>(B("data-v-d7797b29"),s=s(),I(),s),T={class:"page-container main-view"},D={class:"table-box content-container page-content-box"},O={style:{display:"flex","align-items":"center"}},j=S(()=>d("br",null,null,-1)),F=["href"],q={__name:"index",setup(s){const r=a(null),h=a(null),i=a(""),f=a(null),p=a(""),u=a(null),y=()=>{let l={data:p.value};b({method:"post",url:"/api/get/files",data:JSON.stringify(l)}).then(t=>{f.value=t.data}).catch(t=>{}).finally(()=>{})},w=()=>{let l={file:i.value};b({method:"get",url:"/api/download",params:l,responseType:"blob"}).then(t=>{r.value=t.data,console.log("responseData",r.value);const _=new Blob([r.value],{type:"application/octet-stream"}),n=window.URL.createObjectURL(_),e=document.createElement("a");e.href=n,e.download=i.value,e.style.display="none",document.body.appendChild(e),e.click(),window.URL.revokeObjectURL(n),document.body.removeChild(e)}).catch(t=>{}).finally(()=>{})},g=(l,t)=>{l.preventDefault(),u.value=t,u.value&&(i.value=u.value.name,console.log("1111",i.value),w())};return(l,t)=>{const _=V,n=U,e=R,x=N;return E(),L("div",T,[d("div",D,[d("div",O,[o(_,{modelValue:p.value,"onUpdate:modelValue":t[0]||(t[0]=m=>p.value=m),style:{width:"70%","margin-right":"4%","margin-left":"2%","margin-top":"2%"},placeholder:"文件名.."},null,8,["modelValue"]),o(n,{onClick:y,type:"primary",style:{width:"15%","margin-top":"2%"}},{default:c(()=>[v("搜索")]),_:1})]),j,o(x,{data:f.value},{default:c(()=>[o(e,{prop:"name",label:"文件名"}),o(e,{prop:"created",label:"创建时间"}),o(e,{prop:"modified",label:"修改时间"}),o(e,{prop:"size",label:"文件大小"}),o(e,{label:"操作"},{default:c(({row:m})=>[o(n,{type:"success",onClick:k=>g(k,m)},{default:c(()=>[v("下载")]),_:2},1032,["onClick"])]),_:1})]),_:1},8,["data"]),d("a",{ref:"downloadLink",style:{display:"none"},href:h.value,download:""},null,8,F)])])}}},Y=C(q,[["__scopeId","data-v-d7797b29"]]);export{Y as default};
